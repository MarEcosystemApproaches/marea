source("~/GitHub/marea/data-raw/ea_migrate.R")
migrate_ea_objects()
obj <- glorys_bottom_temperature
is.list(obj)
if (!all(c("data", "meta") %in% names(obj))) next
meta <- obj$meta
obj <- glorys_bottom_temperature
meta <- obj$meta
View(obj)
usethis::use_data(glorys_bottom_temperature, overwrite = TRUE)
usethis::use_data(grey_seals, overwrite = TRUE)
usethis::use_data(grey_seals_2021, overwrite = TRUE)
usethis::use_data(mei, overwrite = TRUE)
usethis::use_data(nao, overwrite = TRUE)
usethis::use_data(npgo, overwrite = TRUE)
usethis::use_data(oni, overwrite = TRUE)
usethis::use_data(pdo, overwrite = TRUE)
usethis::use_data(soi, overwrite = TRUE)
load("~/GitHub/marea/data/food_habits.rda")
fh_ea <- new('ea_data', data = food_habits)
fh <-  food_habits %>% mutate(year = format(as.Date(SDATE), '%Y'))
fh <-  food_habits %>% mutate(year = format(as.Date(food_habits$SDATE), '%Y'))
as.Date(food_habits$SDATE)
as.Date(food_habits$SDATE, '%d-%b-%Y')
fh <-  food_habits %>% mutate(year = format(as.Date(food_habits$SDATE, '%d-%b-%Y'), '%Y'))
fh_ea <- new('ea_data', data = fh)
fh_ea <- new('ea_data', data = fh, value = 'FSHNO')
fh_ea <- as_ea_data(fh, value = 'FSHNO')
fh <-  food_habits %>% mutate(year = as.numeric(format(as.Date(food_habits$SDATE, '%d-%b-%Y'), '%Y')))
fh_ea <- as_ea_data(fh, value = 'FSHNO')
View(fh_ea)
food_habits <- fh_ea
usethis::use_data(food_habits, overwrite = TRUE)
devtools::document()
devtools::document()
devtools::check()
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_nafo.Rdata")
library(here)
load(here("/data/eco_indicators_esswss.Rdata"))
dat.dir<-here::here("data")
eco_indicators_nafo<- "eco_indicators_nafo.Rdata"
load(file.path(dat.dir, eco_indicators_nafo))
dat.dir<-here::here("data-raw/eco-indicators")
eco_indicators_nafo<- "eco_indicators_nafo.Rdata"
load(file.path(dat.dir, eco_indicators_nafo))
eco_indicators_esswss<-"eco_indicators_esswss.Rdata"
load(file.path(dat.dir, eco_indicators_esswss))
library(tidyverse)
allIndicators<-eco_indicators_esswss
eco_indicators_esswss<-"eco_indicators_esswss.Rdata"
load(file.path(dat.dir, eco_indicators_esswss))
eco_indicators_esswss<-allIndicators
eco_indicators<-bind_rows(eco_indicators_nafo, eco_indicators_esswss)
eco_indicators<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
library(marea)
head(eco_indicators)
eco_indicators <- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
View(eco_indicators)
eco_indicators <- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
catch_data <- data.frame(
year = 2015:2022,
landings = c(1250, 1180, 1320, 1450, 1280, 1390, 1220, 1310),
vessel_count = c(45, 42, 48, 51, 46, 49, 44, 47)
)
# Create object with additional metadata
lobster_catch <- ea_data(
data = catch_data,
value_col = "landings",
data_type = "Commercial Landings",
region = "Maritimes",
location_descriptor = "LFA 34",
units = "tonnes",
species = "American Lobster",
source_citation = "DFO Statistical Services",
# Additional custom metadata
fishing_season = "November-May",
assessment_year = 2023,
stock_status = "Healthy"
)
eco_indicators <- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(ID=="4X", YEAR<2021) |>
rename(year=YEAR, region=ID)
eco_indicators <- ea_data(
data = eco_indicators_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4X",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(ID=="4X", YEAR<2021) |>
select(!(ID)) |>
rename(year=YEAR)
head(eco_indicators_4X
)
eco_indicators_4X <- ea_data(
data = eco_indicators_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X <- ea_data(
data = eco_indicators_4X,
value_col = "ShannonDiversity_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X <- ea_data(
data = eco_indicators_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X <- as_ea_data(
x = eco_indicators_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
View(eco_indicators_4X)
?ea_data
as.data.frame(eco_indicators)
eco_indicators <- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
str(eco_indicators)
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_nafo.Rdata")
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_esswss.Rdata")
eco_indicators_esswss<-allIndicators
View(eco_indicators_nafo)
View(eco_indicators_esswss)
cols(eco_indicators_nafo)
colnames(eco_indicators_nafo)
colnames(eco_indicators_esswss)
eco_indicators<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
View eco_indicators
View(eco_indicators)
setdiff(names(eco_indicators_nafo), names(eco_indicators_esswss))
head(eco_indicators)
eco_indicators <- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(ID=="4X", YEAR<2021) |>
rename(year=YEAR, region=ID) |>
select(year, region, SpeciesRichness_ALL)
View(eco_indicators_4X)
species_richness_4X <- ea_data(
data = eco_indicators_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_4X<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(ID=="4X", YEAR<2021) |>
rename(year=YEAR, region=ID) |>
select(year, SpeciesRichness_ALL)
species_richness_4X <- ea_data(
data = eco_indicators_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
catch_data <- data.frame(
year = 2015:2022,
landings = c(1250, 1180, 1320, 1450, 1280, 1390, 1220, 1310),
vessel_count = c(45, 42, 48, 51, 46, 49, 44, 47)
)
head(catch_cata)
head(catch_data)
head(eco_indicators_4X)
str(catch_data)
eco_indicators<-as.data.frame(eco_indicators)
str(eco_indicators)
eco_indicators<- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X, ESS, WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
lobster_catch <- ea_data(
data = catch_data,
value_col = "landings",
data_type = "Commercial Landings",
region = "Maritimes",
location_descriptor = "LFA 34",
units = "tonnes",
species = "American Lobster",
source_citation = "DFO Statistical Services",
# Additional custom metadata
fishing_season = "November-May",
assessment_year = 2023,
stock_status = "Healthy"
)
eco_indicators<- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V 4W 4X ESS WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
spprichness_4X<-as.data.frame(eco_indicators_4X)
spprichness_4X<- ea_data(
data = spprichness_4X,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V 4W 4X ESS WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators<- ea_data(
data = eco_indicators,
value_col = "BIOMASS_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V 4W 4X ESS WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators<- ea_data(
data = eco_indicators,
value_col = "BIOMASS_ALL",
data_type = "ecological indicators",  region = "Maritimes",
location_descriptor = "NAFO 4V 4W 4X ESS WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators<- ea_data(
data = eco_indicators,
value_col = "BIOMASS_ALL",
data_type = "ecological indicators",region = "Maritimes",
location_descriptor = "NAFO 4V 4W 4X ESS WSS",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
biomass_4X<-bind_rows(eco_indicators_nafo, eco_indicators_esswss) |>
filter(ID=="4X", YEAR<2021) |>
rename(year=YEAR, region=ID) |>
select(year, BIOMASS_ALL)
biomass_4X <- ea_data(
data = biomass_4X,
value_col = "avg_temp",  # Specify which column contains the values
data_type = "Bottom Temperature",
region = "Maritimes",
location_descriptor = "Halifax Line Station 2",
units = "°C",
source_citation = "DFO Maritimes Region Monitoring Program"
)
biomass_4X <- ea_data(
data = biomass_4X,
value_col = "BIOMASS_ALL",  # Specify which column contains the values
data_type = "Bottom Temperature",
region = "Maritimes",
location_descriptor = "Halifax Line Station 2",
units = "°C",
source_citation = "DFO Maritimes Region Monitoring Program"
)
ea.print(biomass_4X)
eco_indicators_nafo<-eco_indicators_nafo |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
eco_indicators_nafo <- ea_data(
data = eco_indicators_nafo,
value_col = "SpeciesRichness_ALL",
data_type = "ecological indicators",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X",
units = "varied",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_nafo <- ea_data(
data = eco_indicators_nafo,
value_col = "SpeciesRichness_ALL",
data_type = "landings",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X",
units = "tonnes",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
eco_indicators_nafo
eco_indicators_nafo <- ea_data(
data = eco_indicators_nafo,
value_col = "BIOMASS_ALL",
data_type = "landings",
region = "Maritimes",
location_descriptor = "NAFO 4V, 4W, 4X",
units = "tonnes",
species = "multiple",
source_citation = "Bundy et al. 2017",
)
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_nafo.Rdata")
eco_indicators_nafo<-eco_indicators_nafo |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
eco_indicators_nafo <- ea_data(
data = eco_indicators_nafo,
value_col = "SpeciesRichness_ALL",
data_type = "landings",
region = "Maritimes",
location_descriptor = "NAFO",
units = "tonnes",
source_citation = "Bundy et al. 2017",
)
ea.print(eco_indicators_nafo
)
eco_indicators_nafo <- ea_data(
data = eco_indicators_nafo,
value_col = "SpeciesRichness_ALL",
data_type = "diversity",
region = "Maritimes",
location_descriptor = "NAFO",
units = "tonnes",
source_citation = "Bundy et al. 2017",
)
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_nafo.Rdata")
eco_indicators_nafo<-eco_indicators_nafo |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
eco_indicators_nafo <- ea_data(
data = eco_indicators_nafo,
value_col = "SpeciesRichness_ALL",
data_type = "diversity",
region = "Maritimes",
location_descriptor = "NAFO",
units = "tonnes",
source_citation = "Bundy et al. 2017",
)
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_esswss.Rdata")
eco_indicators_esswss<-allIndicators
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_nafo.Rdata")
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data-raw/eco-indicators/eco_indicators_esswss.Rdata")
eco_indicators_esswss<-allIndicators
join_indicators<-left_join(eco_indicators_nafo, eco_indicators_esswss, by="YEAR") |>
eco_indicators<-join_indicators |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
join_indicators<-left_join(eco_indicators_nafo, eco_indicators_esswss, by="YEAR") |>
L
join_indicators<-left_join(eco_indicators_nafo, eco_indicators_esswss, by="YEAR")
join_indicators<-bind_rows(eco_indicators_nafo, eco_indicators_esswss)
eco_indicators<-join_indicators |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
View(join_indicators)
eco_indicators<-join_indicators |>
filter(YEAR<2021) |>
rename(year=YEAR, region=ID)
eco_indicators<- ea_data(
data = eco_indicators,
value_col = "SpeciesRichness_ALL",
data_type = "diversity",
region = "Maritimes",
location_descriptor = "NAFO",
units = "tonnes",
source_citation = "Bundy et al. 2017",
)
View(eco_indicators)
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data/food_habits.rda")
save(eco_indicators, file = "eco_indicators.rda")
usethis::use_data(eco_indicators, overwrite = TRUE)
save(eco_indicators, file = "data_raw/eco_indicators.rda")
save(eco_indicators, file = "eco_indicators.rda")
save(eco_indicators, file = here("data_raw", "eco_indicators.rda"))
save(eco_indicators, file = here("data_raw", "eco-indicators", "eco_indicators.rda"))
save(eco_indicators, file = here("data-raw", "eco-indicators", "eco_indicators.rda"))
save(eco_indicators, file = here("data-raw", "eco-indicators", "eco_indicators.rda"))
usethis::use_data(eco_indicators, overwrite = TRUE)
View(eco_indicators)
ea.print(eco_indicators)
ea.print(food_habits)
eco_indicators@data |> rename(SpeciesRichness_ALL=value)
save(eco_indicators, file = here("data-raw", "eco-indicators", "eco_indicators.rda"))
usethis::use_data(eco_indicators, overwrite = TRUE)
View(eco_indicators)
eco_indicators@data |> rename(SpeciesRichness_ALL=value)
ea.print(eco_indicators)
save(eco_indicators, file = here("data-raw", "eco-indicators", "eco_indicators.rda"))
usethis::use_data(eco_indicators, overwrite = TRUE)
load("C:/Users/tamj/OneDrive - DFO-MPO/JCT work/marea/data/food_habits.rda")
View(food_habits)
colnames(eco_indicators)
#'   \item{BIOMASS_PELAGIC}{Prey length (cm)}
#'   \item{BIOMASS_SKATE}{Number of prey}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{DIGESTION}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
#'   \item{}{Digestive state (coded)}
